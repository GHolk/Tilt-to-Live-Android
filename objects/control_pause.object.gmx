<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-10000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Store all drawn information, some score info, then deactivate all, and create drawn replacements
//event_user(0);
var i = 0;
var j = 0;
var objectType;
var drawnObject;
var objectArray;
var control_score_parameters;
var emptyArray;
emptyArray[0] = -1;
var newArray;
newArray[0] = -1;

objectArray = -1
control_score_parameters = -1;

with (all) {
    objectType = object_index;
    objectArray[i, 0] = sprite_index;
    objectArray[i, 1] = image_index;
    objectArray[i, 2] = x;
    objectArray[i, 3] = y;
    objectArray[i, 4] = image_xscale;
    objectArray[i, 5] = image_yscale;
    objectArray[i, 6] = image_angle;
    objectArray[i, 7] = image_blend;
    objectArray[i, 8] = image_alpha;
    objectArray[i, 9] = depth;
    objectArray[i, 10] = emptyArray;
    
    //For the objects that draw
    if (objectType = powerup_nuke) {
        newArray[0] = rotdirection*rotation 
        objectArray[i, 10] = newArray}
    else if (objectType = powerup_laser) {
        if retainangle = -1 {
            newArray[0] = player.image_angle }
        else {
            newArray[0] = retainangle }
        objectArray[i, 10] = newArray
    }
    
    else if (objectType = control_score) { //oh god
    //0 = high score, negative if beaten, 1 = best time, negative if beaten, 2 = whether next level is unlocked,
    //3 = xcoord of showCombo, 4 = ycoord of showCombo. 5 = combo value, negative if combo is not complete, 
    //6 = xcoord of combo box, 7 = ycoord of combo box
        control_score_parameters[0] = highScore //negative if beaten
        control_score_parameters[1] = bestTime
        control_score_parameters[2] = (score &gt; control_playercolor.unlocknextscore or control.time &gt; control_playercolor.unlocknexttime)
        if player.spikes = 1 or player.lightning = 1 then {
            control_score_parameters[3] = player.x+40
            control_score_parameters[4] = player.y-40
        } else if player.shield = 1 then {
            control_score_parameters[3] = player.x+30
            control_score_parameters[4] = player.y-30
        } else {
            control_score_parameters[3] = player.x+20
            control_score_parameters[4] = player.y-20
        }
        control_score_parameters[5] = sign(showCombo-5.1) * findCombo; //negative if combo is not complete
        if instance_number(combo_container) &gt; 0 {
            control_score_parameters[6] = combo_container.y }
        else {
            control_score_parameters[6] = -1 }
        objectArray[i, 10] = control_score_parameters;
    }
    //show_message("Storing info about object " + string(i))
    i++;
}



timescore=control.time
pointscore=score

pausedplayerx = player.x
pausedplayery = player.y
instance_deactivate_all(true)
instance_activate_object(control_playercolor)

j = i - 1;
while j &gt;= 0 {
    drawnObject = instance_create(objectArray[j, 2], objectArray[j, 3], drawn_object)
    drawnObject.sprite_index = objectArray[j, 0]
    drawnObject.image_index = objectArray[j, 1]
    drawnObject.image_xscale = objectArray[j, 4]
    drawnObject.image_yscale = objectArray[j, 5]
    drawnObject.image_angle = objectArray[j, 6]
    drawnObject.image_blend = objectArray[j, 7]
    drawnObject.image_alpha = objectArray[j, 8]
    drawnObject.depth = objectArray[j, 9]
    drawnObject.image_speed = 0
    drawnObject.parameter = objectArray[j, 10]
    j--;
    //    show_message("Creating placeholder for object " + string(j))
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Pause all sounds and play the pause sound
audio_pause_all()
if control_playercolor.beatscore=-1 and control_playercolor.beattime=-1 then audio_play_sound(pause,5,false)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>enabled</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>301</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_set_alarm</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>20</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>pointer_alpha</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alphaIncrement</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0.015</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
//surface_free(surf)
//view_visible[1]=false
//FMODGroupSetPaused(2,0)
//FMODGroupSetVolume(31,orig_volume);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Deactivate objects and restore the glory of view[0]
//FMODGroupSetPaused(2,1)
//orig_volume = FMODGroupGetVolume(3);
//FMODGroupSetVolume(3,orig_volume*0.5);
//bg_pause = background0

//pausedplayerx = player.x
//pausedplayery = player.y
//instance_deactivate_all(true)
//instance_activate_object(control_playercolor)
//view_surface_id[0]=-1
//surface_reset_target()
show_message("I am a moron ... didn't delete this")



//if not(YoYo_GetPlatform()==os_windows or YoYo_GetPlatform()==os_macosx) {
//view_wview=display_get_width()}



//else {
//bg_pause = background_create_from_screen(0,0,view_wview,view_hview,false,true)


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Activate all instances, and delete placeholders, then resume sounds
with (drawn_object) { instance_destroy() }
instance_activate_all()
audio_resume_all()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>203</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_kill_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>301</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_set_alarm</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>40</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>3</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alphaIncrement</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>301</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_set_alarm</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>1 / alphaIncrement - 1</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>2</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alphaIncrement</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>-alphaIncrement</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>enabled</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Method for initializing the surface
surf = surface_create(power(2,11),power(2,10))
view_surface_id[0]=surf
view_visible[1] = true
surface_set_target(surf)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Draw the background
/*if YoYo_GetPlatform()==os_windows or YoYo_GetPlatform()==os_macosx {
draw_background(bg_pause,0,0) }
else {
draw_background_part_ext(bg_pause,0,0,view_wview,768,x,y,0.96,1.06,c_white,1)
}*/
//Draw a box with some text

var xx,yy;
xx = GAME_WIDTH / 2 + global.roomShift;
yy = GAME_HEIGHT / 2;

/*if alphaIncrement &gt;= 0 {
    if surface_exists(surf){
        if view_current = 1 {
//            draw_background(background_index[0],0,0)
//            d3d_set_hidden(0)
            draw_surface(surf, 0, 0)
//            d3d_set_hidden(1)
        }
    }
    else {
        instance_activate_all()
        event_user(0)
        alarm[4]=1
        show_message("Surface is gone, remaking...")
    }
}*/

if pointer_alpha = 0 and enabled = 1 {

    if (mouse_check_button_released(mb_left) or keyboard_check_released(vk_space)) and pointer_alpha = 0 and enabled = 1 {
        audio_play_sound(pop,5,false) 
        if control_playercolor.beatscore=-1 and control_playercolor.beattime=-1 {
            pointer_alpha = alphaIncrement
            
            draw_set_color(c_black)
            draw_set_alpha(pointer_alpha / 4)
            draw_rectangle(0,0,pausedplayerx-129, GAME_HEIGHT, false)
            draw_rectangle(pausedplayerx+128,0,view_wview[0], GAME_HEIGHT, false)
            draw_set_color(c_white);
            draw_set_alpha(1)
            
            draw_sprite_ext(unpause_pointer,0,pausedplayerx,pausedplayery,1,1,0,c_white,pointer_alpha)
            alarm[1] = 1 / alphaIncrement - 1
        }
        else {
        room_restart()}
        
        if mouse_x&lt;128 and mouse_y&lt;128 then {
        audio_stop_all()
        audio_play_sound(pop,5,false) 
        game_restart()}
    }
  //  else {draw_sprite_ext(unpause_pointer,0,player.x,player.y,1,1,0,c_white,pointer_alpha)}

    
    draw_set_color(c_black);
    draw_set_alpha(0.5);
    draw_rectangle(0,0,view_wview[1],768,false)
    //draw_rectangle(xx-150,yy-20,xx+150,yy+20,false);
    
    draw_set_color(c_white);
    draw_set_alpha(1);
    draw_set_halign(fa_center);
    draw_set_valign(fa_middle);
    draw_set_font(font2);
    if control_playercolor.beatscore=-1 and control_playercolor.beattime=-1 {
        if YoYo_GetPlatform()==os_windows or YoYo_GetPlatform()==os_macosx {
            draw_text(xx,yy,"Game Paused##Press space to continue");}
        else {
            draw_text(xx,yy,"Game Paused##Tap anywhere to continue");}
    }
    
    else {

        if control_playercolor.beatscore=0 and control_playercolor.beattime=0 then draw_text(xx,yy,"Game Over##Score: " + string(format_number(pointscore))+"##Time: " + string(format_time(timescore/60)));
        if control_playercolor.beatscore=1 and control_playercolor.beattime=0 then draw_text(xx,yy,"Game Over##New Highscore: " + string(format_number(pointscore))+"##Time: " + string(format_time(timescore/60)));
        if control_playercolor.beatscore=0 and control_playercolor.beattime=1 then draw_text(xx,yy,"Game Over##Score: " + string(format_number(pointscore))+"##Best time: " + string(format_time(timescore/60)));
        if control_playercolor.beatscore=1 and control_playercolor.beattime=1 then draw_text(xx,yy,"Game Over##New Highscore: " + string(format_number(pointscore))+"##Best time: " + string(format_time(timescore/60)));
        }
    draw_set_font(font0);
    draw_text(96,64,"Return to menu");
    draw_set_halign(fa_left);
    draw_set_valign(fa_top);


}

else if enabled = 1{
  //  if alphaIncrement &lt; 0 { pausedplayerx = player.x; pausedplayery = player.y }
    draw_set_color(c_black)
    draw_set_alpha(pointer_alpha / 4)
    draw_rectangle(0,0,pausedplayerx-129, GAME_HEIGHT, false)
    draw_rectangle(pausedplayerx+128,0,view_wview[0], GAME_HEIGHT, false)
    draw_set_color(c_white);
    draw_set_alpha(1)
    
    draw_sprite_ext(unpause_pointer,0,pausedplayerx,pausedplayery,1,1,0,c_white,pointer_alpha)
    pointer_alpha+=alphaIncrement}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>enabled</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>93874194</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>203</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_kill_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
